3. ACL ( Access Control List )


리눅스의 chmod 명령어를 사용한 권한 설정은 너무 단순하다.

하나의 파일에 사용자마다, 그룹마다 권한을 설정하기 위해 개발되었다.


사용의 예) test1이라는 유저하나에만 권한을 설정할 수 있다.

1) ACL 설정 명령어

 * setfacl : 권한을 설정한다.

옵션 및 사용 예 :
 
1-1) m 옵션 : ACL 정책설정 시 사용자, 그룹을 지정하여 사용하는 옵션

ex) 

setfacl -m u:test1:rwx /aaa  >> test1이라는 사용자에게 /aaa디렉터리 대한 rwx 권한을 부여하겠다
setfacl -m g:testgroup1:wx /aaa >> testgroup1이라는 그룹에게 /aaa 디렉터리에 대한 wx의 권한을 부여

1-2) R 옵션 : 대상이 되는 디렉터리 뿐만 아니라 하위의 파일, 디렉터리 까지 권한부여

ex) 

setfacl -R -m u:test1:rwx /aaa >> aaa 디렉터리 및 하위 디렉터리, 파일들 까지 한번에 ACL 정책을 부여하겠다.

1-3) d 옵션 : 디폴트값으로 정책을 설정한다. 정책설정 후의 해당디렉터리 하위에 생성되는 파일에 동일한 ACL정책을 자동으로 설정시킨다. d옵션을 사용하지 않고 파일을 그냥 생성하면 ACL 정책이 설정 안된 상태로 생성된다.

*주의할점*

원래 디렉터리 하위의 존재하던 파일, 디렉터리들은 d옵션만을 주어서 정책을 설정할 시 정책이 먹히지 않는다. R옵션과 같이 사용해야 원래 존재하던 하위까지 적용가능




ex) 

setfacl -d -m u:test1:rwx /aaa >> test1 계정의 /aaa 디렉터리에 관한 권한을 rwx로 설정한다. 또한 d 옵션에 의하여 이후 이 디렉터리에 하위에 생성되는 모든 파일들은 이 ACL정책을 자동으로 부여하여 생성한다. 

2) ACL 설정확인 명령어

* getfacl "대상" : "대상"의 ACL 설정을 보겠다.

옵션 : 

   -R : 하위의 것들 까지 같이 보겠다.

3) ACL 삭제 명령어

* setfacl -x u:test2 /aaa >> aaa 디렉터리에 test2 사용자의 설정을 지운다.

* setfacl -b /aaa >> aaa 디렉터리에 모든 ACL 정책을 다 지워버린다.

옵션 :

      - x : 지정한 사용자, 그룹의 정책을 지운다.

      -b : ACL 정책을 싹다 지워버린다.
